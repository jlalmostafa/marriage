<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>syria-house</title>
    
    <!-- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ø¥Ø¶Ø§ÙØ© Swiper Ù„Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <style>
        /* Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙˆØªØ­Ø³ÙŠÙ† Ø­Ø¬Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ø· */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f0f2f5; color: #1c1e21; line-height: 1.34; min-height: 100vh; padding-bottom: 70px; }
        .top-header { position: sticky; top: 0; right: 0; width: 100%; height: 56px; background-color: #ffffff; border-bottom: 1px solid #dddfe2; display: flex; align-items: center; justify-content: space-between; padding: 0 16px; z-index: 1000; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
        .logo-container { display: flex; align-items: center; }
        .logo { font-size: 28px; color: #1877f2; margin-left: 8px; }
        .site-title { font-size: 20px; font-weight: 700; color: #1877f2; }
        .add-property-btn { background-color: #1877f2; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: background-color 0.2s; }
        .add-property-btn:hover { background-color: #166fe5; }
        .main-content { max-width: 800px; margin: 0 auto; padding: 16px; }
        .verify-section { background-color: #ffffff; padding: 16px; border-radius: 8px; margin-bottom: 16px; border: 1px solid #dddfe2; display: none; }
        .verify-section.active { display: flex; }
        .verify-input { flex: 1; padding: 10px 12px; border: 1px solid #dddfe2; border-radius: 6px; font-size: 14px; color: #1c1e21; }
        .verify-input:focus { outline: none; border-color: #1877f2; }
        .verify-btn { background-color: #1877f2; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; }
        .verify-btn:hover { background-color: #166fe5; }
        .filters-container { background-color: #ffffff; border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; border: 1px solid #dddfe2; display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
        .filter-group { display: flex; align-items: center; gap: 8px; }
        .filter-label { font-size: 14px; color: #65676b; font-weight: 500; }
        .filter-select { padding: 8px 12px; border: 1px solid #dddfe2; border-radius: 6px; background-color: #f0f2f5; font-size: 14px; color: #1c1e21; min-width: 120px; cursor: pointer; transition: all 0.2s; }
        .filter-select:focus { outline: none; border-color: #1877f2; background-color: #ffffff; }
        .listings-container { display: flex; flex-direction: column; gap: 16px; }
        .listing-card { background-color: #ffffff; border-radius: 8px; border: 1px solid #dddfe2; overflow: hidden; position: relative; }
        /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙˆØ³Ø§Ø¦Ø· */
        .media-container, .youtube-container, .swiper {
            height: 320px;
        }
        .swiper { width: 100%; margin-left: auto; margin-right: auto; }
        .swiper-slide { text-align: center; font-size: 18px; background: #000; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .swiper-slide img { display: block; width: 100%; height: 100%; object-fit: cover; }
        .swiper-button-prev, .swiper-button-next { color: white; background-color: rgba(0, 0, 0, 0.5); width: 40px; height: 40px; border-radius: 50%; }
        .swiper-button-prev:after, .swiper-button-next:after { font-size: 18px; }
        .swiper-pagination-bullet { background: white; opacity: 0.7; }
        .swiper-pagination-bullet-active { background: #1877f2; }
        .media-container img { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s; }
        .media-container img.loaded { opacity: 1; }
        .media-container video { position: absolute; top: 1%; left: 50%; transform: translate(-50%, -50%); width: 100%; height: 100%; object-fit: cover; cursor: pointer; }
        .youtube-container { position: relative; overflow: hidden; background-color: #000; }
        .youtube-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .media-placeholder { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
        .play-video-btn { width: 60px; height: 60px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; margin-bottom: 12px; transition: transform 0.2s, background-color 0.2s; }
        .play-video-btn:hover { transform: scale(1.05); background-color: rgba(255, 255, 255, 0.3); }
        .video-placeholder-text { color: white; font-size: 14px; font-weight: 500; }
        .youtube-thumbnail { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .listing-content { padding: 16px; }
        .listing-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
        .listing-title { font-size: 16px; font-weight: 600; color: #1c1e21; line-height: 1.4; flex: 1; white-space: pre-wrap; }
        .price-tag { background-color: #e7f3ff; color: #1877f2; padding: 6px 12px; border-radius: 6px; font-size: 15px; font-weight: 600; margin-right: 12px; }
        .listing-details { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px; }
        .detail-item { display: flex; align-items: center; gap: 6px; font-size: 14px; color: #65676b; }
        .detail-icon { color: #1877f2; font-size: 14px; }
        .status-badge { padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .status-ready { background-color: #e7f6ea; color: #0a7c2f; }
        .status-not-ready { background-color: #fef2e8; color: #c55400; }
        .action-buttons { display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #dddfe2; }
        .action-btn { flex: 1; padding: 8px 12px; border: none; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; }
        .action-btn i { font-size: 14px; }
        .like-btn { background-color: #f0f2f5; color: #65676b; }
        .like-btn:hover { background-color: #e4e6eb; }
        .like-btn.liked { background-color: #e7f3ff; color: #1877f2; }
        .comment-btn { background-color: #f0f2f5; color: #65676b; }
        .comment-btn:hover { background-color: #e4e6eb; }
        .view-comments-btn { background-color: #f0f2f5; color: #65676b; }
        .view-comments-btn:hover { background-color: #e4e6eb; }
        .delete-btn { background-color: #fef2f2; color: #dc2626; display: none; }
        .delete-btn:hover { background-color: #fee2e2; }
        .delete-btn.visible { display: flex; }
        .whatsapp-btn { background-color: #25D366; color: white; text-decoration: none; padding: 10px 16px; border-radius: 6px; font-size: 14px; font-weight: 600; text-align: center; display: flex; align-items: center; justify-content: center; gap: 8px; transition: background-color 0.2s; cursor: pointer; }
        .whatsapp-btn:hover { background-color: #1da851; }
        .comments-section { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; margin-top: 12px; }
        .comments-section.expanded { max-height: 300px; }
        .comments-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #dddfe2; }
        .comments-title { font-size: 15px; font-weight: 600; color: #1c1e21; }
        .comments-list { max-height: 200px; overflow-y: auto; margin-bottom: 12px; }
        .comment-item { background-color: #f0f2f5; padding: 10px 12px; margin-bottom: 8px; border-radius: 8px; font-size: 14px; line-height: 1.4; color: #1c1e21; }
        .comment-form { margin-top: 12px; }
        .comment-textarea { width: 100%; padding: 10px 12px; border: 1px solid #dddfe2; border-radius: 6px; background-color: #f0f2f5; font-size: 14px; color: #1c1e21; resize: vertical; min-height: 80px; margin-bottom: 8px; }
        .comment-textarea:focus { outline: none; border-color: #1877f2; background-color: #ffffff; }
        .submit-comment-btn { background-color: #1877f2; color: white; border: none; padding: 8px 20px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; }
        .submit-comment-btn:hover { background-color: #166fe5; }
        .add-form-container { background-color: #ffffff; border-radius: 8px; padding: 16px; margin-bottom: 16px; border: 1px solid #dddfe2; display: none; }
        .add-form-container.active { display: block; }
        .form-header { display: flex; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid #dddfe2; }
        .form-title { font-size: 18px; font-weight: 600; color: #1c1e21; }
        .close-form-btn { margin-right: auto; background: none; border: none; font-size: 20px; color: #65676b; cursor: pointer; padding: 4px; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .close-form-btn:hover { background-color: #f0f2f5; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px; }
        .form-group { margin-bottom: 12px; }
        .form-label { display: block; margin-bottom: 6px; font-size: 14px; color: #65676b; font-weight: 500; }
        .form-input, .form-select { width: 100%; padding: 10px 12px; border: 1px solid #dddfe2; border-radius: 6px; background-color: #f0f2f5; font-size: 14px; color: #1c1e21; transition: all 0.2s; }
        .form-input:focus, .form-select:focus { outline: none; border-color: #1877f2; background-color: #ffffff; }
        .radio-group { display: flex; gap: 16px; margin-top: 8px; }
        .radio-option { display: flex; align-items: center; gap: 6px; cursor: pointer; }
        .radio-input { width: 16px; height: 16px; accent-color: #1877f2; }
        .form-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 16px; padding-top: 16px; border-top: 1px solid #dddfe2; }
        .submit-btn { background-color: #1877f2; color: white; border: none; padding: 10px 24px; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .submit-btn:hover { background-color: #166fe5; }
        .cancel-btn { background-color: #e4e6eb; color: #1c1e21; border: none; padding: 10px 24px; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .cancel-btn:hover { background-color: #d8dadf; }
        .result-message { padding: 10px 12px; border-radius: 6px; font-size: 14px; font-weight: 500; margin-top: 8px; display: none; }
        .success-message { background-color: #e7f6ea; color: #0a7c2f; border: 1px solid #a8e6b9; }
        .error-message { background-color: #fde8e8; color: #c53030; border: 1px solid #fecaca; }
        .no-results { text-align: center; padding: 40px 20px; background-color: #ffffff; border-radius: 8px; border: 1px solid #dddfe2; }
        .no-results i { font-size: 48px; color: #bec3c9; margin-bottom: 16px; }
        .no-results h3 { font-size: 18px; color: #1c1e21; margin-bottom: 8px; }
        .no-results p { font-size: 14px; color: #65676b; }
        .loading { text-align: center; padding: 40px 20px; color: #65676b; font-size: 14px; }
        .error-display { background-color: #fde8e8; color: #c53030; padding: 16px; border-radius: 8px; border: 1px solid #fecaca; margin-bottom: 16px; }
        .success-display { background-color: #e7f6ea; color: #0a7c2f; padding: 16px; border-radius: 8px; border: 1px solid #a8e6b9; margin-bottom: 16px; }
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù„Ø§ÙŠØª Ø¨ÙˆÙƒØ³ Ù„Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .lightbox-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; }
        .lightbox-content { position: relative; max-width: 95%; max-height: 95%; }
        .lightbox-image, .lightbox-video { max-width: 100%; max-height: 90vh; object-fit: contain; border-radius: 5px; }
        .lightbox-video { width: auto; height: auto; max-width: 100%; max-height: 90vh; outline: none; }
        .lightbox-close { position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; cursor: pointer; z-index: 2001; }
        .lightbox-prev, .lightbox-next { position: absolute; top: 50%; transform: translateY(-50%); color: white; font-size: 50px; cursor: pointer; padding: 20px; user-select: none; z-index: 2001; }
        .lightbox-prev { left: 20px; }
        .lightbox-next { right: 20px; }
        .lightbox-prev:hover, .lightbox-next:hover { color: #1877f2; }
        .media-upload-container { display: flex; flex-direction: column; gap: 12px; }
        .media-upload-btn { background-color: #f0f2f5; border: 2px dashed #dddfe2; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s; }
        .media-upload-btn:hover { background-color: #e4e6eb; border-color: #1877f2; }
        .media-upload-btn i { font-size: 24px; color: #65676b; margin-bottom: 8px; }
        .media-preview { display: none; max-width: 100%; margin-top: 10px; border-radius: 8px; overflow: hidden; }
        .media-preview img, .media-preview video { max-width: 100%; max-height: 200px; object-fit: contain; }
        .remove-media-btn { background-color: #ef4444; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer; margin-top: 8px; }
        .remove-media-btn:hover { background-color: #dc2626; }
        .multiple-images-preview { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
        .image-preview-item { width: 80px; height: 80px; border-radius: 5px; overflow: hidden; border: 2px solid #ddd; position: relative; }
        .image-preview-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-preview-item .remove-image { position: absolute; top: 2px; right: 2px; background: rgba(255, 0, 0, 0.7); color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 12px; }
        .bottom-nav-bar { position: fixed; bottom: 0; right: 0; width: 100%; height: 60px; background-color: #ffffff; backdrop-filter: blur(20px); border-top: 1px solid #dddfe2; box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; color: #65676b; transition: all 0.3s ease; position: relative; padding: 8px; border-radius: 8px; flex: 1; max-width: 100px; height: 100%; }
        .nav-item:hover { color: #1877f2; }
        .nav-item.active { color: #1877f2; }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }
        .nav-text { font-size: 10px; font-weight: 500; }
        .notification-badge { position: absolute; top: 0; left: 50%; background-color: #e41e3f; color: white; font-size: 10px; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f0f2f5; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: #bec3c9; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8adb3; }
        @media (max-width: 768px) {
            .main-content { padding: 12px; }
            .media-container, .youtube-container, .swiper { height: 260px; }
            .form-grid { grid-template-columns: 1fr; }
            .action-buttons { flex-wrap: wrap; }
            .action-btn { min-width: calc(33.333% - 8px); }
            .filters-container { flex-direction: column; align-items: stretch; }
            .filter-group { width: 100%; justify-content: space-between; }
            .filter-select { flex: 1; min-width: auto; }
        }
        @media (max-width: 480px) {
            .media-container, .youtube-container, .swiper { height: 220px; }
            .top-header { padding: 0 12px; }
            .site-title { font-size: 18px; }
            .logo { font-size: 24px; }
            .action-btn { min-width: calc(50% - 4px); font-size: 12px; padding: 6px 8px; }
            .bottom-nav-bar { height: 65px; }
            .nav-text { font-size: 9px; }
        }
        /* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ */
        .contact-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1004;
            justify-content: center;
            align-items: center;
            animation: modalFadeIn 0.3s ease-out;
            backdrop-filter: blur(5px);
        }
        .contact-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            text-align: center;
        }
        .contact-content h3 {
            color: #1877f2;
            margin-bottom: 20px;
        }
        .contact-whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: #25D366;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            width: 100%;
            cursor: pointer;
        }
        .contact-whatsapp-btn:hover {
            background: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 211, 102, 0.4);
        }
        .contact-whatsapp-btn i {
            font-size: 24px;
        }
        .contact-close-btn {
            margin-top: 15px;
            background: #f0f2f5;
            color: #65676b;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header class="top-header">
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-home"></i>
            </div>
            <div class="site-title">Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</div>
        </div>
        
      
    </header>
    
    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main class="main-content">
        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <div class="verify-section" id="verifySection">
            <input type="password" class="verify-input" id="secretCodeInput" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯">
            <button class="verify-btn" id="verifyBtn">
                <i class="fas fa-key"></i> ØªØ­Ù‚Ù‚
            </button>
        </div>
        
        <!-- Ø±Ø³Ø§Ù„Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚ -->
        <div class="result-message" id="codeResult"></div>
        
        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø± (Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©) -->
        <div class="add-form-container" id="addFormContainer">
            <div class="form-header">
                <h3 class="form-title">Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯</h3>
                <button class="close-form-btn" id="closeFormBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="dataForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="mediaType">Ù†ÙˆØ¹ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</label>
                        <select class="form-select" id="mediaType" required onchange="changeMediaInput()">
                            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</option>
                            <option value="youtube">Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨</option>
                            <option value="images">ØµÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø©</option>
                            <option value="video">ÙÙŠØ¯ÙŠÙˆ</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="youtubeInputGroup" style="display: none;">
                        <label class="form-label" for="youtubeUrl">Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨</label>
                        <input type="url" class="form-input" id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=..." dir="ltr">
                        <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">Ù‚Ù… Ø¨Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† ÙŠÙˆØªÙŠÙˆØ¨ ÙˆÙ„ØµÙ‚Ù‡ Ù‡Ù†Ø§</small>
                    </div>
                    
                    <div class="form-group" id="imagesInputGroup" style="display: none;">
                        <label class="form-label">Ø±ÙØ¹ ØµÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø©</label>
                        <div class="media-upload-btn" id="imagesUploadBtn">
                            <i class="fas fa-images"></i>
                            <p>Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ØµÙˆØ± (ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¯Ø© ØµÙˆØ±)</p>
                            <input type="file" id="imageFiles" accept="image/*" multiple style="display: none;" onchange="previewMultipleImages(event)">
                        </div>
                        <div class="multiple-images-preview" id="imagesPreview"></div>
                        <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¯Ø© ØµÙˆØ±. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 10 ØµÙˆØ±.</small>
                    </div>
                    
                    <div class="form-group" id="videoInputGroup" style="display: none;">
                        <label class="form-label">Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ</label>
                        <div class="media-upload-btn" id="videoUploadBtn">
                            <i class="fas fa-video"></i>
                            <p>Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ</p>
                            <input type="file" id="videoFile" accept="video/*" style="display: none;" onchange="previewVideo(event)">
                        </div>
                        <div class="media-preview" id="videoPreview">
                            <video id="previewVideo" controls>
                                <source id="videoSource" src="" type="video/mp4">
                                Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                            </video>
                            <button type="button" class="remove-media-btn" onclick="removeVideo()">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
                        </div>
                        <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: 20MB</small>
                    </div>
                    
                    <!-- Ø­Ù‚Ù„ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± -->
                    <div class="form-group">
                        <label class="form-label" for="category1">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±</label>
                        <select class="form-select" id="category1" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                            <option value="Ø´Ù‚Ø©">ğŸ¢ Ø´Ù‚Ø©</option>
                            <option value="Ø£Ø±Ø¶">ğŸŒ³ Ø£Ø±Ø¶</option>
                            <option value="Ù…Ø­Ù„ ØªØ¬Ø§Ø±ÙŠ">ğŸª Ù…Ø­Ù„ ØªØ¬Ø§Ø±ÙŠ</option>
                        </select>
                    </div>
                    
                    <!-- Ø­Ù‚Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚ -->
                    <div class="form-group">
                        <label class="form-label" for="floors1">Ø¹Ø¯Ø¯ Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚</label>
                        <input type="number" class="form-input" id="floors1" required placeholder="Ù…Ø«Ø§Ù„: 2" min="1" max="20">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="price1">Ø§Ù„Ø³Ø¹Ø± ($)</label>
                        <input type="number" class="form-input" id="price1" required placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="description1">Ø§Ù„ÙˆØµÙ</label>
                        <textarea class="form-input" id="description1" required placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù‚Ø§Ø±" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="region1">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                        <select class="form-select" id="region1" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                            <option value="idlib">Ø¥Ø¯Ù„Ø¨</option>
                            <option value="salqin">Ø³Ù„Ù‚ÙŠÙ†</option>
                            <option value="aljisr">Ø¬Ø³Ø± Ø§Ù„Ø´ØºÙˆØ±</option>
                            <option value="ariha">Ø£Ø±ÙŠØ­Ø§</option>
                            <option value="sarmada">Ø³Ø±Ù…Ø¯Ø§</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" class="radio-input" name="ready1" value="true" required>
                                <span>Ø¬Ø§Ù‡Ø²</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" class="radio-input" name="ready1" value="false" required>
                                <span>ØºÙŠØ± Ø¬Ø§Ù‡Ø²</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø±
                    </button>
                    <button type="button" class="cancel-btn" id="cancelBtn">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </form>
            
            <div id="formResult"></div>
        </div>
        
        <!-- Ø§Ù„ÙÙ„Ø§ØªØ± (Ù…Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±) -->
        <div class="filters-container">
            <div class="filter-group">
                <span class="filter-label">Ø§Ù„Ø³Ø¹Ø±:</span>
                <select class="filter-select" id="priceFilter">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="under-20000">ØªØ­Øª 20,000$</option>
                    <option value="20000-30000">20,000$ - 30,000$</option>
                    <option value="30000-40000">30,000$ - 40,000$</option>
                    <option value="40000-80000">40,000$ - 80,000$</option>
                    <option value="80000-100000">80,000$ - 100,000$</option>
                    <option value="over-100000">ÙÙˆÙ‚ 100,000$</option>
                </select>
            </div>
            
            <!-- ÙÙ„ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± -->
            <div class="filter-group">
                <span class="filter-label">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±:</span>
                <select class="filter-select" id="categoryFilter">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="Ø´Ù‚Ø©">ğŸ¢ Ø´Ù‚Ø©</option>
                    <option value="Ø£Ø±Ø¶">ğŸŒ³ Ø£Ø±Ø¶</option>
                    <option value="Ù…Ø­Ù„ ØªØ¬Ø§Ø±ÙŠ">ğŸª Ù…Ø­Ù„ ØªØ¬Ø§Ø±ÙŠ</option>
                </select>
            </div>
            
            <!-- ÙÙ„ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚ -->
            <div class="filter-group">
                <span class="filter-label">Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚:</span>
                <select class="filter-select" id="floorsFilter">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="1">1 Ø·Ø§Ø¨Ù‚</option>
                    <option value="2">2 Ø·ÙˆØ§Ø¨Ù‚</option>
                    <option value="3">3 Ø·ÙˆØ§Ø¨Ù‚</option>
                    <option value="4">4 Ø·ÙˆØ§Ø¨Ù‚</option>
                    <option value="5">5 Ø·ÙˆØ§Ø¨Ù‚</option>
                    <option value="6">6 Ø·ÙˆØ§Ø¨Ù‚</option>
                    <option value="7">7 Ø·ÙˆØ§Ø¨Ù‚</option>
                </select>
            </div>
            
            <div class="filter-group">
                <span class="filter-label">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                <select class="filter-select" id="readyFilter">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="true">Ø¬Ø§Ù‡Ø²</option>
                    <option value="false">ØªØ­Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</option>
                </select>
            </div>
            
            <div class="filter-group">
                <span class="filter-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</span>
                <select class="filter-select" id="regionFilter">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="idlib">Ø¥Ø¯Ù„Ø¨</option>
                    <option value="salqin">Ø³Ù„Ù‚ÙŠÙ†</option>
                    <option value="aljisr">Ø¬Ø³Ø± Ø§Ù„Ø´ØºÙˆØ±</option>
                    <option value="ariha">Ø£Ø±ÙŠØ­Ø§</option>
                    <option value="sarmada">Ø³Ø±Ù…Ø¯Ø§</option>
                </select>
            </div>
        </div>
        
        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª -->
        <div class="listings-container" id="listingsContainer">
            <div class="loading" id="loadingMessage">
                <i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶...
            </div>
        </div>
    </main>
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
    <nav class="bottom-nav-bar">
        <a href="https://syria-house.netlify.app/" class="nav-item" id="navMap">
            <div class="nav-icon"><i class="fas fa-map-marked-alt"></i></div>
            <div class="nav-text">Ø§Ù„Ø®Ø±ÙŠØ·Ø©</div>
        </a>
        
      
      
        <a href="https://syria-house.netlify.app/iidd.html" class="nav-item" id="navVideo">
            <div class="nav-icon"><i class="fas fa-video"></i>
                <span class="notification-badge" id="propertyCount">0</span>
            </div>
            <div class="nav-text">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
        </a>
  <a href="#" class="nav-item" id="openVerifyBtn"><div class="nav-icon"><i class="fas fa-user"></i></div><div class="nav-text">Ø­Ø³Ø§Ø¨ÙŠ</div></a>
        
        
        <!-- Ø²Ø± ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
        <a href="#" class="nav-item" id="contactUsBtn">
            <div class="nav-icon"><i class="fas fa-headset"></i></div>
            <div class="nav-text">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</div>
        </a>
    </nav>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ¨Ø±Ø© -->
    <div class="lightbox-modal" id="lightboxModal" onclick="closeLightbox(event)">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <span class="lightbox-prev" onclick="changeLightboxImage(-1)">&#10094;</span>
        <span class="lightbox-next" onclick="changeLightboxImage(1)">&#10095;</span>
        <div class="lightbox-content">
            <img class="lightbox-image" id="lightboxImage" src="" alt="ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø©">
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…ÙƒØ¨Ø±Ø© (Ø¬Ø¯ÙŠØ¯) -->
    <div class="lightbox-modal" id="lightboxVideoModal" onclick="closeVideoLightbox(event)">
        <span class="lightbox-close" onclick="closeVideoLightbox()">&times;</span>
        <div class="lightbox-content" style="max-width: 95%; max-height: 95%;">
            <video id="lightboxVideo" class="lightbox-video" controls style="width: 100%; height: 100%; max-height: 90vh; outline: none;"></video>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ -->
    <div class="contact-modal" id="contactModal">
      <div class="contact-content">
          <h3> ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ø§Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¹Ø¨Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ© </h3>
          <a href="https://wa.me/+963949340870" target="_blank" class="contact-whatsapp-btn">
              <i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨: 00963949340870
          </a>
          <br>
          <a href="https://wa.me/+963969315579" target="_blank" class="contact-whatsapp-btn">
              <i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨: 00963969315579
          </a>
          
          
          <button class="contact-close-btn" onclick="closeContactModal()">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let allListings = [];
        let isVerified = false;
        const USERNAME = 'jlalmostafa';
        const REPO_NAME = 'ldlib-real-estate';
        let TOKEN = "";
        const DATA_FILE_PATH = 'properties_data.json';
        const MEDIA_FOLDER = 'media/';
        const WHATSAPP_NUMBER = '+963969315579'; // Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø·
        let uploadedImages = [];
        let uploadedVideo = null;
        let videoFile = null;
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ¨Ø±Ø©
        let lightboxImages = [];
        let currentLightboxIndex = 0;
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        let videoElements = [];
        let imageObservers = [];
        let scrollHandler = null;
        let videoObserver = null; // Intersection Observer Ù„Ù„ÙÙŠØ¯ÙŠÙˆ
        
        // ========== Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Google Sheets ==========
        async function fetchTokenFromGoogleSheets() {
            try {
                const GOOGLE_SHEET_ID = '16ARji9CLluF8e3m64gGOLYNB9cCoHH5ZqM8iWhk5XqU';
                const url = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/export?format=csv`;
                
                const response = await fetch(url);
                if (!response.ok) throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ†: ${response.status}`);
                
                const csvData = await response.text();
                const rows = csvData.split('\n');
                
                for (let row of rows) {
                    const cells = row.split(',');
                    for (let cell of cells) {
                        const cleanCell = cell.trim();
                        const githubTokenRegex = /(ghp_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59}|gho_[a-zA-Z0-9]{36})/;
                        const tokenMatch = cleanCell.match(githubTokenRegex);
                        if (tokenMatch) {
                            TOKEN = tokenMatch[0];
                            console.log("ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙƒÙ†:", TOKEN.substring(0, 10) + "...");
                            return true;
                        }
                        if (cleanCell.length > 30 && !cleanCell.includes(' ') && cleanCell.includes('_')) {
                            TOKEN = cleanCell;
                            console.log("ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†Øµ ÙŠØ´Ø¨Ù‡ Ø§Ù„ØªÙˆÙƒÙ†:", TOKEN.substring(0, 10) + "...");
                            return true;
                        }
                    }
                }
                console.warn("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªÙˆÙƒÙ†");
                return false;
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ†:", error);
                return false;
            }
        }
        
        // ========== Ø¯Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙˆÙƒÙ† Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© ==========
        async function initializeToken() {
            const loadingElement = document.getElementById('loadingMessage');
            try {
                loadingElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
                const tokenFound = await fetchTokenFromGoogleSheets();
                if (!tokenFound) {
                    TOKEN = "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";
                    console.log("Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ");
                }
                await fetchGitHubData();
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙˆÙƒÙ†:", error);
                loadingElement.innerHTML = `
                    <div class="error-display">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ†</h3>
                        <p>Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</p>
                        <button onclick="initializeToken()" style="margin-top:10px; padding:8px 16px; background:#1877f2; color:white; border:none; border-radius:6px; cursor:pointer;">
                            Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                        </button>
                    </div>
                `;
                TOKEN = "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";
                await fetchGitHubData();
            }
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return dateString;
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return date.toLocaleDateString('ar-EG', options);
            } catch (error) {
                console.error('Error formatting date:', error);
                return dateString;
            }
        }
        
        function checkSecretCode() {
            const secretCode = document.getElementById('secretCodeInput').value;
            const codeResult = document.getElementById('codeResult');
            
            if (secretCode === '009911') {
                isVerified = true;
                codeResult.innerHTML = `<i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯`;
                codeResult.className = 'result-message success-message';
                codeResult.style.display = 'block';
                document.getElementById('verifySection').classList.remove('active');
                document.getElementById('addFormContainer').classList.add('active');
                showDeleteButtons();
                document.getElementById('secretCodeInput').value = '';
                setTimeout(() => { codeResult.style.display = 'none'; }, 5000);
                return true;
            } else {
                codeResult.innerHTML = `<i class="fas fa-times-circle"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©`;
                codeResult.className = 'result-message error-message';
                codeResult.style.display = 'block';
                document.getElementById('secretCodeInput').style.animation = 'none';
                setTimeout(() => {
                    document.getElementById('secretCodeInput').style.animation = 'shake 0.5s';
                }, 10);
                setTimeout(() => { codeResult.style.display = 'none'; }, 3000);
                return false;
            }
        }
        
        function showDeleteButtons() {
            document.querySelectorAll('.delete-btn').forEach(btn => btn.classList.add('visible'));
        }
        
        function hideDeleteButtons() {
            document.querySelectorAll('.delete-btn').forEach(btn => btn.classList.remove('visible'));
        }
        
        async function deleteListing(listingId) {
            if (!isVerified) {
                alert('ÙŠØ¬Ø¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                openVerifySection();
                return;
            }
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø§Ø±ØŸ')) return;
            
            const deleteBtn = document.querySelector(`.delete-btn[data-id="${listingId}"]`);
            let originalText = '';
            if (deleteBtn) {
                originalText = deleteBtn.innerHTML;
                deleteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                deleteBtn.disabled = true;
            }
            try {
                const listingIndex = allListings.findIndex(item => item.id === listingId);
                if (listingIndex === -1) return;
                allListings.splice(listingIndex, 1);
                await saveToGitHub(allListings);
                document.getElementById('propertyCount').textContent = `${allListings.length}`;
                applyFilters();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù‚Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error("Error:", error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ø¹Ù‚Ø§Ø±', 'error');
            } finally {
                if (deleteBtn) {
                    deleteBtn.innerHTML = originalText;
                    deleteBtn.disabled = false;
                }
            }
        }
        
        async function likeListing(listingId) {
            let originalText = '';
            const likeButton = document.querySelector(`.like-btn[data-id="${listingId}"]`);
            if (likeButton) {
                originalText = likeButton.innerHTML;
                likeButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                likeButton.disabled = true;
            }
            try {
                const listingIndex = allListings.findIndex(item => item.id === listingId);
                if (listingIndex === -1) return;
                if (!allListings[listingIndex].likes) allListings[listingIndex].likes = 0;
                allListings[listingIndex].likes++;
                saveToGitHub(allListings).then(() => {
                    updateLikeButton(listingId, allListings[listingIndex].likes);
                }).catch(error => {
                    console.error("Error saving like:", error);
                    allListings[listingIndex].likes--;
                    updateLikeButton(listingId, allListings[listingIndex].likes);
                    showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨', 'error');
                });
            } catch (error) {
                console.error("Error:", error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨', 'error');
                if (likeButton) {
                    likeButton.innerHTML = originalText;
                    likeButton.disabled = false;
                }
            }
        }
        
        function updateLikeButton(listingId, likesCount) {
            const likeButton = document.querySelector(`.like-btn[data-id="${listingId}"]`);
            if (likeButton) {
                likeButton.innerHTML = `<i class="fas fa-thumbs-up"></i> Ø£Ø¹Ø¬Ø¨Ù†ÙŠ (${likesCount})`;
                likeButton.disabled = false;
                likeButton.classList.add('liked');
                setTimeout(() => likeButton.classList.remove('liked'), 1000);
            }
        }
        
        function openVerifySection() {
            document.getElementById('verifySection').classList.add('active');
            document.getElementById('codeResult').style.display = 'none';
            document.getElementById('secretCodeInput').value = '';
            document.getElementById('secretCodeInput').focus();
        }
        
        function showNotification(message, type = 'info') {
            const oldNotification = document.getElementById('customNotification');
            if (oldNotification) oldNotification.remove();
            
            const notification = document.createElement('div');
            notification.id = 'customNotification';
            notification.style.cssText = `
                position: fixed; top: 80px; right: 50%; transform: translateX(50%);
                padding: 12px 20px; border-radius: 8px; font-size: 14px; font-weight: 500;
                z-index: 9999; display: flex; align-items: center; gap: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15); animation: slideDown 0.3s ease;
            `;
            if (type === 'success') {
                notification.style.backgroundColor = '#e7f6ea';
                notification.style.color = '#0a7c2f';
                notification.style.border = '1px solid #a8e6b9';
                notification.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            } else if (type === 'error') {
                notification.style.backgroundColor = '#fde8e8';
                notification.style.color = '#c53030';
                notification.style.border = '1px solid #fecaca';
                notification.innerHTML = `<i class="fas fa-times-circle"></i> ${message}`;
            } else {
                notification.style.backgroundColor = '#e7f3ff';
                notification.style.color = '#1877f2';
                notification.style.border = '1px solid #bbdfff';
                notification.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
            }
            document.body.appendChild(notification);
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideUp 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 3000);
        }
        
        const animationStyles = document.createElement('style');
        animationStyles.textContent = `
            @keyframes slideDown { from { transform: translateX(50%) translateY(-20px); opacity: 0; } to { transform: translateX(50%) translateY(0); opacity: 1; } }
            @keyframes slideUp { from { transform: translateX(50%) translateY(0); opacity: 1; } to { transform: translateX(50%) translateY(-20px); opacity: 0; } }
            @keyframes shake { 0%,100% { transform: translateX(0); } 10%,30%,50%,70%,90% { transform: translateX(-5px); } 20%,40%,60%,80% { transform: translateX(5px); } }
        `;
        document.head.appendChild(animationStyles);
        
        function getAreaName(areaCode) {
            const areas = {
                'idlib': 'Ø¥Ø¯Ù„Ø¨',
                'salqin': 'Ø³Ù„Ù‚ÙŠÙ†',
                'aljisr': 'Ø¬Ø³Ø± Ø§Ù„Ø´ØºÙˆØ±',
                'ariha': 'Ø£Ø±ÙŠØ­Ø§',
                'sarmada': 'Ø³Ø±Ù…Ø¯Ø§'
            };
            return areas[areaCode] || areaCode;
        }
        
        function parseVideoUrl(videoUrl) {
            if (!videoUrl) return "";
            try {
                let videoId = '';
                if (videoUrl.includes("youtube.com/watch?v=")) videoId = videoUrl.split("v=")[1].split("&")[0];
                else if (videoUrl.includes("youtu.be/")) videoId = videoUrl.split("youtu.be/")[1].split("?")[0];
                else if (videoUrl.includes("youtube.com/shorts/")) videoId = videoUrl.split("shorts/")[1].split("?")[0];
                else if (videoUrl.includes("youtube.com/embed/")) videoId = videoUrl.split("embed/")[1].split("?")[0];
                if (videoId) return `https://www.youtube.com/embed/${videoId}?rel=0&showinfo=0&autoplay=0`;
                return videoUrl;
            } catch (e) {
                console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:", e);
                return videoUrl;
            }
        }
        
        function getYoutubeThumbnail(videoUrl) {
            try {
                let videoId = '';
                if (videoUrl.includes("youtube.com/watch?v=")) videoId = videoUrl.split("v=")[1].split("&")[0];
                else if (videoUrl.includes("youtu.be/")) videoId = videoUrl.split("youtu.be/")[1].split("?")[0];
                else if (videoUrl.includes("youtube.com/shorts/")) videoId = videoUrl.split("shorts/")[1].split("?")[0];
                if (videoId) return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                return '';
            } catch (e) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ ØµÙˆØ±Ø© Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨:", e);
                return '';
            }
        }
        
        function changeMediaInput() {
            const mediaType = document.getElementById('mediaType').value;
            const youtubeGroup = document.getElementById('youtubeInputGroup');
            const imagesGroup = document.getElementById('imagesInputGroup');
            const videoGroup = document.getElementById('videoInputGroup');
            youtubeGroup.style.display = 'none';
            imagesGroup.style.display = 'none';
            videoGroup.style.display = 'none';
            if (mediaType === 'youtube') youtubeGroup.style.display = 'block';
            else if (mediaType === 'images') imagesGroup.style.display = 'block';
            else if (mediaType === 'video') videoGroup.style.display = 'block';
            removeImages();
            removeVideo();
            document.getElementById('youtubeUrl').value = '';
        }
        
        function previewMultipleImages(event) {
            const files = Array.from(event.target.files);
            if (files.length + uploadedImages.length > 10) {
                alert('ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ 10 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰');
                return;
            }
            
            files.forEach(file => {
                if (file.size > 5 * 1024 * 1024) {
                    alert('Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù‡Ùˆ 5MB Ù„ÙƒÙ„ ØµÙˆØ±Ø©');
                    return;
                }
                uploadedImages.push(file);
            });
            
            renderImagePreviews();
            document.getElementById('imageFiles').value = '';
        }
        
        function renderImagePreviews() {
            const preview = document.getElementById('imagesPreview');
            preview.innerHTML = '';
            
            uploadedImages.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'image-preview-item';
                    previewItem.innerHTML = `
                        <img src="${e.target.result}" alt="ØµÙˆØ±Ø© ${index+1}">
                        <span class="remove-image" onclick="removeImage(${index})">&times;</span>
                    `;
                    preview.appendChild(previewItem);
                };
                reader.readAsDataURL(file);
            });
        }
        
        function removeImage(index) {
            uploadedImages.splice(index, 1);
            renderImagePreviews();
        }
        
        function removeImages() {
            uploadedImages = [];
            renderImagePreviews();
        }
        
        function previewVideo(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 20 * 1024 * 1024) {
                    alert('Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù‡Ùˆ 20MB');
                    event.target.value = '';
                    return;
                }
                videoFile = file;
                const url = URL.createObjectURL(file);
                const preview = document.getElementById('videoPreview');
                const video = document.getElementById('previewVideo');
                const source = document.getElementById('videoSource');
                source.src = url;
                video.load();
                preview.style.display = 'block';
                uploadedVideo = url;
            }
        }
        
        function removeVideo() {
            const preview = document.getElementById('videoPreview');
            const video = document.getElementById('previewVideo');
            const source = document.getElementById('videoSource');
            const fileInput = document.getElementById('videoFile');
            source.src = '';
            video.load();
            preview.style.display = 'none';
            fileInput.value = '';
            if (uploadedVideo) {
                URL.revokeObjectURL(uploadedVideo);
                uploadedVideo = null;
            }
            videoFile = null;
        }
        
        async function uploadToGitHub(file, fileName) {
            try {
                const reader = new FileReader();
                return new Promise((resolve, reject) => {
                    reader.onload = async function(e) {
                        try {
                            const content = e.target.result.split(',')[1];
                            const response = await fetch(`https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${MEDIA_FOLDER}${fileName}`, {
                                method: 'PUT',
                                headers: {
                                    'Authorization': `token ${TOKEN}`,
                                    'Accept': 'application/vnd.github.v3+json',
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    message: `Ø±ÙØ¹ Ù…Ù„Ù ${fileName}`,
                                    content: content,
                                    branch: 'main'
                                })
                            });
                            if (!response.ok) {
                                const errorData = await response.json();
                                console.error('GitHub API Error:', errorData);
                                throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù: ${response.status}`);
                            }
                            const data = await response.json();
                            resolve(data.content.download_url);
                        } catch (error) {
                            reject(error);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            } catch (error) {
                console.error('Error uploading to GitHub:', error);
                throw error;
            }
        }
        
        async function fetchGitHubData() {
            try {
                showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'info');
                const response = await fetch(`https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${DATA_FILE_PATH}`, {
                    headers: { 'Authorization': `token ${TOKEN}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!response.ok) {
                    if (response.status === 404) {
                        allListings = [];
                        await saveToGitHub(allListings);
                        showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯', 'success');
                    } else throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${response.status}`);
                } else {
                    const data = await response.json();
                    const base64Content = data.content;
                    const binaryString = atob(base64Content);
                    const bytes = new Uint8Array(binaryString.length);
                    for (let i = 0; i < binaryString.length; i++) bytes[i] = binaryString.charCodeAt(i);
                    const decoder = new TextDecoder('utf-8');
                    const content = decoder.decode(bytes);
                    allListings = JSON.parse(content);
                    allListings = allListings.map(p => ({
                        ...p,
                        category: p.category || null,
                        floors: p.floors || null,
                        images: p.images || null
                    }));
                    showNotification(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allListings.length} Ø¹Ù‚Ø§Ø±`, 'success');
                }
                document.getElementById('propertyCount').textContent = `${allListings.length}`;
                document.getElementById('loadingMessage').style.display = 'none';
                applyFilters();
                initializePerformanceOptimizations();
            } catch (error) {
                console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error);
                document.getElementById('loadingMessage').innerHTML = `
                    <div class="error-display">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        <p>${error.message}</p>
                        <button onclick="fetchGitHubData()" style="margin-top:10px; padding:8px 16px; background:#1877f2; color:white; border:none; border-radius:6px; cursor:pointer;">
                            Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                        </button>
                    </div>
                `;
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        async function saveToGitHub(data) {
            try {
                const getResponse = await fetch(`https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${DATA_FILE_PATH}`, {
                    headers: { 'Authorization': `token ${TOKEN}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                let sha = null;
                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    sha = fileData.sha;
                }
                const content = JSON.stringify(data, null, 2);
                const encoder = new TextEncoder();
                const encodedContent = encoder.encode(content);
                let binaryString = '';
                for (let i = 0; i < encodedContent.length; i++) binaryString += String.fromCharCode(encodedContent[i]);
                const base64Content = btoa(binaryString);
                const response = await fetch(`https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents/${DATA_FILE_PATH}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: 'ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª',
                        content: base64Content,
                        sha: sha,
                        branch: 'main'
                    })
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('GitHub API Error:', errorData);
                    throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${response.status}`);
                }
                return true;
            } catch (error) {
                console.error("Error saving to GitHub:", error);
                throw error;
            }
        }
        
        function initializeLazyLoading() {
            imageObservers.forEach(observer => observer.disconnect());
            imageObservers = [];
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.classList.add('loaded');
                            imageObserver.unobserve(img);
                        }
                    }
                });
            }, { rootMargin: '50px 0px', threshold: 0.1 });
            document.querySelectorAll('img[data-src]').forEach(img => imageObserver.observe(img));
            imageObservers.push(imageObserver);
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø©
        function initializeVideoAutoPlay() {
            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¥Ù† ÙˆØ¬Ø¯
            if (videoObserver) videoObserver.disconnect();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±Ø§Ù‚Ø¨ Ø¬Ø¯ÙŠØ¯
            videoObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const video = entry.target;
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø© (threshold 0.5 ÙŠØ¹Ù†ÙŠ 50% Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø¸Ø§Ù‡Ø±)
                    if (entry.isIntersecting) {
                        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø§Ù„ØµÙˆØª
                        video.play().catch(e => console.log("ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:", e));
                        video.muted = false; // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªÙ… Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„ØµÙˆØª
                    } else {
                        // Ø¥Ø°Ø§ Ø®Ø±Ø¬ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©ØŒ Ø£ÙˆÙ‚Ù Ø§Ù„ØªØ´ØºÙŠÙ„ ÙˆØ£Ø¹Ø¯ ÙƒØªÙ… Ø§Ù„ØµÙˆØª Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
                        video.pause();
                        video.muted = true; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ÙƒØªÙ…
                    }
                });
            }, { threshold: 0.5 }); // 50% Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¸Ø§Ù‡Ø±
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ØµÙØ­Ø©
            document.querySelectorAll('video').forEach(video => {
                videoObserver.observe(video);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù„ØªØ´Ù…Ù„ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        function initializePerformanceOptimizations() {
            setTimeout(() => {
                initializeLazyLoading();
                initializeVideoAutoPlay(); // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            }, 100);
        }
        
        // Ø¯ÙˆØ§Ù„ Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…ÙƒØ¨Ø±Ø© (Ø¬Ø¯ÙŠØ¯)
        function openVideoLightbox(videoSrc) {
            const modal = document.getElementById('lightboxVideoModal');
            const video = document.getElementById('lightboxVideo');
            video.src = videoSrc;
            video.play(); // ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeVideoLightbox(event) {
            if (event && event.target.id !== 'lightboxVideoModal' && event.target.className !== 'lightbox-close') return;
            const modal = document.getElementById('lightboxVideoModal');
            const video = document.getElementById('lightboxVideo');
            video.pause();
            video.src = '';
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ù…Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±
        function applyFilters() {
            const priceFilter = document.getElementById("priceFilter").value;
            const categoryFilter = document.getElementById("categoryFilter").value;
            const floorsFilter = document.getElementById("floorsFilter").value;
            const readyFilter = document.getElementById("readyFilter").value;
            const regionFilter = document.getElementById("regionFilter").value;
            
            const filteredListings = allListings.filter(item => {
                let priceMatch = false;
                if (priceFilter === "all") priceMatch = true;
                else if (priceFilter === "under-20000" && item.price < 20000) priceMatch = true;
                else if (priceFilter === "20000-30000" && item.price >= 20000 && item.price <= 30000) priceMatch = true;
                else if (priceFilter === "30000-40000" && item.price > 30000 && item.price <= 40000) priceMatch = true;
                else if (priceFilter === "40000-80000" && item.price > 40000 && item.price <= 80000) priceMatch = true;
                else if (priceFilter === "80000-100000" && item.price > 80000 && item.price <= 100000) priceMatch = true;
                else if (priceFilter === "over-100000" && item.price > 100000) priceMatch = true;
                
                let categoryMatch = true;
                if (categoryFilter !== 'all') {
                    categoryMatch = item.category === categoryFilter;
                }
                
                let floorsMatch = true;
                if (floorsFilter !== 'all') {
                    const floorValue = parseInt(floorsFilter);
                    floorsMatch = item.floors && item.floors === floorValue;
                }
                
                const readyMatch = readyFilter === "all" || item.ready === (readyFilter === "true");
                const regionMatch = regionFilter === "all" || item.region === regionFilter;
                
                return priceMatch && categoryMatch && floorsMatch && readyMatch && regionMatch;
            });
            
            displayListings(filteredListings);
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function createWhatsAppLink(description, price, category, floors, region, ready, mediaUrl, mediaType, images) {
            const phoneNumber = WHATSAPP_NUMBER.replace(/\D/g, '');
            const statusText = ready === true ? "Ø¬Ø§Ù‡Ø²" : "ØªØ­Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡";
            const areaName = getAreaName(region);
            
            let mediaInfo = '';
            if (mediaUrl) {
                if (mediaType === 'youtube') mediaInfo = `- Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${mediaUrl}`;
                else if (mediaType === 'images' && images && images.length > 0) {
                    mediaInfo = `- Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ±:\n`;
                    images.forEach((url, i) => { mediaInfo += `ØµÙˆØ±Ø© ${i+1}: ${url}\n`; });
                } else if (mediaType === 'image') mediaInfo = `- Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©: ${mediaUrl}`;
                else if (mediaType === 'video') mediaInfo = `- Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${mediaUrl}`;
            }
            
            const categoryText = category ? `- Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±: ${category}` : '';
            const floorsText = floors ? `- Ø¹Ø¯Ø¯ Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚: ${floors}` : '';
            
            const message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù…Ù‡ØªÙ… Ø¨Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„ØªØ§Ù„ÙŠ:

${description}

- Ø§Ù„Ø³Ø¹Ø±: ${price.toLocaleString()} $
${categoryText}
${floorsText}
- Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${areaName}
- Ø§Ù„Ø­Ø§Ù„Ø©: ${statusText}
${mediaInfo ? mediaInfo + '\n' : ''}
Ø£ÙˆØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„.`;

            return `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨
        function loadYoutubeVideo(videoId, placeholderId) {
            const placeholder = document.getElementById(placeholderId);
            if (!placeholder) return;
            placeholder.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?rel=0&showinfo=0&autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
        }
        
        // Ø¯ÙˆØ§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ¨Ø±Ø© (Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ù„ØªØ¹Ù…Ù„ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ±)
        function openLightbox(images, index) {
            lightboxImages = images;
            currentLightboxIndex = index;
            const lightboxImg = document.getElementById('lightboxImage');
            lightboxImg.src = images[index];
            document.getElementById('lightboxModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        // Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ØªØ³ØªØ®Ø¯Ù… Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ù‚Ø§Ø± Ù„ÙØªØ­ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±
        function openLightboxById(propertyId, index) {
            const property = allListings.find(p => p.id === propertyId);
            if (property && property.images && property.images.length > 0) {
                openLightbox(property.images, index);
            }
        }
        
        function closeLightbox(event) {
            if (event && event.target.id !== 'lightboxModal' && event.target.className !== 'lightbox-close') return;
            document.getElementById('lightboxModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function changeLightboxImage(direction) {
            currentLightboxIndex += direction;
            if (currentLightboxIndex < 0) currentLightboxIndex = lightboxImages.length - 1;
            if (currentLightboxIndex >= lightboxImages.length) currentLightboxIndex = 0;
            document.getElementById('lightboxImage').src = lightboxImages[currentLightboxIndex];
        }
        
        // Ø¯ÙˆØ§Ù„ Ù†Ø§ÙØ°Ø© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§
        function showContactModal() {
            document.getElementById('contactModal').style.display = 'flex';
        }
        
        function closeContactModal() {
            document.getElementById('contactModal').style.display = 'none';
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ¥Ù…ÙƒØ§Ù†ÙŠØ© ÙØªØ­ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
        function displayListings(data) {
            const listingsContainer = document.getElementById('listingsContainer');
            if (data.length === 0) {
                listingsContainer.innerHTML = `<div class="no-results"><i class="far fa-folder-open"></i><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù‚Ø§Ø±Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©</h3><p>Ø­Ø§ÙˆÙ„ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«</p></div>`;
                return;
            }
            
            let listingsHTML = '';
            data.forEach((item) => {
                const youtubePlaceholderId = `youtube-placeholder-${item.id}`;
                const swiperId = `swiper-${item.id}`;
                
                const whatsappLink = createWhatsAppLink(
                    item.description, item.price, item.category, item.floors, item.region, item.ready,
                    item.mediaUrl, item.mediaType, item.images
                );
                
                let commentsHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª</p>';
                if (item.comments && item.comments.length > 0) {
                    commentsHTML = item.comments.map(comment => `<div class="comment-item">${comment}</div>`).join('');
                }
                
                let mediaHTML = '';
                if (item.images && item.images.length > 0) {
                    // Ø¹Ø±Ø¶ ØµÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Swiper
                    mediaHTML = `
                        <div class="swiper ${swiperId}" id="${swiperId}">
                            <div class="swiper-wrapper">
                                ${item.images.map((img, index) => `
                                    <div class="swiper-slide" onclick="openLightboxById(${item.id}, ${index})">
                                        <img data-src="${img}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±" loading="lazy">
                                    </div>
                                `).join('')}
                            </div>
                            <div class="swiper-button-prev"></div>
                            <div class="swiper-button-next"></div>
                            <div class="swiper-pagination"></div>
                        </div>
                    `;
                } else if (item.mediaUrl) {
                    if (item.mediaType === 'youtube') {
                        const videoId = parseVideoUrl(item.mediaUrl).split('/embed/')[1]?.split('?')[0] || '';
                        const thumbnail = getYoutubeThumbnail(item.mediaUrl);
                        if (videoId) {
                            mediaHTML = `<div class="youtube-container"><div class="media-placeholder" id="${youtubePlaceholderId}" onclick="loadYoutubeVideo('${videoId}', '${youtubePlaceholderId}')">${thumbnail ? `<img src="${thumbnail}" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" class="youtube-thumbnail">` : ''}<div class="play-video-btn"><i class="fas fa-play"></i></div><div class="video-placeholder-text">Ø§Ù†Ù‚Ø± Ù„Ù„ØªØ´ØºÙŠÙ„</div></div></div>`;
                        } else {
                            mediaHTML = `<div class="media-container" style="display: flex; align-items: center; justify-content: center; background: #f0f2f5;"><i class="fas fa-video" style="font-size: 36px; color: #bec3c9;"></i></div>`;
                        }
                    } else if (item.mediaType === 'image') {
                        // ØµÙˆØ±Ø© Ù…ÙØ±Ø¯Ø© - Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± ØªÙØªØ­ ÙÙŠ lightbox
                        mediaHTML = `<div class="media-container" onclick="openLightbox(['${item.mediaUrl}'], 0)"><img data-src="${item.mediaUrl}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±" loading="lazy"></div>`;
                    } else if (item.mediaType === 'video') {
                        // Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ autoplay muted playsinline ÙˆØ¥Ø¶Ø§ÙØ© onclick Ù„ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
                        mediaHTML = `
                            <div class="media-container" onclick="openVideoLightbox('${item.mediaUrl}')">
                                <video src="${item.mediaUrl}" autoplay muted playsinline loop style="width:100%; height:400px; object-fit:cover; cursor:pointer;"></video>
                            </div>
                        `;
                    }
                } else {
                    mediaHTML = `<div class="media-container" style="display: flex; align-items: center; justify-content: center; background: #f0f2f5;"><i class="fas fa-home" style="font-size: 36px; color: #bec3c9;"></i></div>`;
                }
                
                const publishDate = item.publishDate ? formatDate(item.publishDate) : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                
                const categoryIcon = item.category === 'Ø´Ù‚Ø©' ? 'ğŸ¢' : (item.category === 'Ø£Ø±Ø¶' ? 'ğŸŒ³' : 'ğŸª');
                const categoryHtml = item.category ? `<div class="detail-item"><i class="fas fa-tag detail-icon"></i><span>${categoryIcon} ${item.category}</span></div>` : '';
                const floorsHtml = item.floors ? `<div class="detail-item"><i class="fas fa-layer-group detail-icon"></i><span>${item.floors} Ø·ÙˆØ§Ø¨Ù‚</span></div>` : '';
                
                listingsHTML += `
                    <div class="listing-card" id="listing-${item.id}">
                        ${mediaHTML}
                        <div class="listing-content">
                            <div class="listing-header">
                                <h3 class="listing-title">${item.description}</h3>
                                <div class="price-tag">${item.price.toLocaleString()} $</div>
                            </div>
                            <div class="listing-details">
                                <div class="detail-item"><i class="fas fa-map-marker-alt detail-icon"></i><span>${getAreaName(item.region)}</span></div>
                                ${categoryHtml}
                                ${floorsHtml}
                                <div class="detail-item"><i class="far fa-calendar-alt detail-icon"></i><span>${publishDate}</span></div>
                                <div class="detail-item"><span class="status-badge ${item.ready ? 'status-ready' : 'status-not-ready'}">${item.ready ? 'Ø¬Ø§Ù‡Ø²' : 'ØªØ­Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡'}</span></div>
                                <div class="detail-item"><i class="fas fa-thumbs-up detail-icon"></i><span>${item.likes || 0}</span></div>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn like-btn" onclick="likeListing(${item.id})" data-id="${item.id}"><i class="fas fa-thumbs-up"></i> Ø£Ø¹Ø¬Ø¨Ù†ÙŠ (${item.likes || 0})</button>
                                <button class="action-btn comment-btn" onclick="showCommentForm(${item.id})"><i class="fas fa-comment"></i> ØªØ¹Ù„ÙŠÙ‚</button>
                                <button class="action-btn view-comments-btn" onclick="toggleComments(${item.id})"><i class="fas fa-eye"></i> Ø¹Ø±Ø¶</button>
                                <button class="action-btn delete-btn" onclick="deleteListing(${item.id})" data-id="${item.id}"><i class="fas fa-trash"></i> Ø­Ø°Ù</button>
                            </div>
                            <a class="whatsapp-btn" href="${whatsappLink}" target="_blank"><i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
                            <div class="comments-section" id="comments-${item.id}">
                                <div class="comments-header"><h4 class="comments-title">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h4></div>
                                <div class="comments-list">${commentsHTML}</div>
                                <div class="comment-form" id="commentForm-${item.id}" style="display:none;">
                                    <textarea class="comment-textarea" id="commentText-${item.id}" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..."></textarea>
                                    <button class="submit-comment-btn" onclick="submitComment(${item.id})"><i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            listingsContainer.innerHTML = listingsHTML;
            if (isVerified) showDeleteButtons();
            
            // ØªÙ‡ÙŠØ¦Ø© Swiper Ù„Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©
            setTimeout(() => {
                data.forEach(item => {
                    if (item.images && item.images.length > 0) {
                        const swiperElement = document.getElementById(`swiper-${item.id}`);
                        if (swiperElement) {
                            new Swiper(`#swiper-${item.id}`, {
                                navigation: {
                                    nextEl: '.swiper-button-next',
                                    prevEl: '.swiper-button-prev',
                                },
                                pagination: {
                                    el: '.swiper-pagination',
                                    clickable: true,
                                },
                                loop: item.images.length > 1,
                            });
                        }
                    }
                });
            }, 100);
            
            // ØªÙ‡ÙŠØ¦Ø© ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙÙŠØ¯ÙŠÙˆ
            initializePerformanceOptimizations();
        }
        
        function toggleComments(listingId) {
            const commentsDiv = document.getElementById(`comments-${listingId}`);
            if (commentsDiv) commentsDiv.classList.toggle('expanded');
        }
        
        function showCommentForm(listingId) {
            const commentForm = document.getElementById(`commentForm-${listingId}`);
            if (commentForm) commentForm.style.display = commentForm.style.display === 'none' ? 'block' : 'none';
            const commentsDiv = document.getElementById(`comments-${listingId}`);
            if (commentsDiv) commentsDiv.classList.add('expanded');
        }
        
        async function submitComment(listingId) {
            const commentText = document.getElementById(`commentText-${listingId}`).value.trim();
            if (!commentText) return;
            try {
                const listingIndex = allListings.findIndex(item => item.id === listingId);
                if (listingIndex === -1) return;
                if (!allListings[listingIndex].comments) allListings[listingIndex].comments = [];
                allListings[listingIndex].comments.push(commentText);
                await saveToGitHub(allListings);
                applyFilters();
                document.getElementById(`commentText-${listingId}`).value = '';
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error("Error:", error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚', 'error');
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        async function handleFormSubmit(e) {
            e.preventDefault();
            const submitBtn = document.querySelector('#dataForm .submit-btn');
            let originalText = '';
            if (submitBtn) {
                originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...`;
                submitBtn.disabled = true;
            }
            try {
                const mediaType = document.getElementById('mediaType').value;
                let mediaUrl = '';
                let images = [];
                if (mediaType === 'youtube') {
                    mediaUrl = document.getElementById('youtubeUrl').value.trim();
                    if (!mediaUrl) throw new Error('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨');
                } else if (mediaType === 'images') {
                    if (uploadedImages.length === 0) throw new Error('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                    for (let i = 0; i < uploadedImages.length; i++) {
                        const fileName = `image_${Date.now()}_${i}_${uploadedImages[i].name}`;
                        const url = await uploadToGitHub(uploadedImages[i], fileName);
                        images.push(url);
                    }
                    mediaUrl = images[0];
                } else if (mediaType === 'video') {
                    if (!videoFile) throw new Error('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø¹Ù‚Ø§Ø±');
                    const fileName = `video_${Date.now()}_${videoFile.name}`;
                    mediaUrl = await uploadToGitHub(videoFile, fileName);
                }
                
                const formData = {
                    id: Date.now(),
                    description: document.getElementById('description1').value.trim(),
                    price: parseInt(document.getElementById('price1').value.trim()),
                    category: document.getElementById('category1').value,
                    floors: parseInt(document.getElementById('floors1').value.trim()),
                    region: document.getElementById('region1').value,
                    ready: document.querySelector('input[name="ready1"]:checked').value === 'true',
                    likes: 0,
                    comments: [],
                    mediaUrl: mediaUrl,
                    mediaType: mediaType === 'images' ? 'image' : mediaType,
                    images: images.length > 0 ? images : null,
                    publishDate: new Date().toISOString().split('T')[0]
                };
                
                if (!formData.description || !formData.price || !formData.category || !formData.floors || !formData.region) {
                    throw new Error('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                }
                
                allListings.unshift(formData);
                await saveToGitHub(allListings);
                
                document.getElementById('formResult').innerHTML = `<div class="success-display"><i class="fas fa-check-circle"></i> ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­</div>`;
                document.getElementById('propertyCount').textContent = `${allListings.length}`;
                document.getElementById('dataForm').reset();
                removeImages();
                removeVideo();
                document.getElementById('youtubeInputGroup').style.display = 'none';
                document.getElementById('imagesInputGroup').style.display = 'none';
                document.getElementById('videoInputGroup').style.display = 'none';
                document.getElementById('mediaType').selectedIndex = 0;
                
                setTimeout(() => {
                    document.getElementById('addFormContainer').classList.remove('active');
                    document.getElementById('formResult').innerHTML = '';
                    applyFilters();
                }, 2000);
                
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error("Error:", error);
                document.getElementById('formResult').innerHTML = `<div class="error-display"><i class="fas fa-exclamation-triangle"></i> ${error.message}</div>`;
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø±', 'error');
            } finally {
                if (submitBtn) {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('priceFilter').addEventListener('change', applyFilters);
            document.getElementById('categoryFilter').addEventListener('change', applyFilters);
            document.getElementById('floorsFilter').addEventListener('change', applyFilters);
            document.getElementById('readyFilter').addEventListener('change', applyFilters);
            document.getElementById('regionFilter').addEventListener('change', applyFilters);
            
            document.getElementById('verifyBtn').addEventListener('click', checkSecretCode);
            document.getElementById('secretCodeInput').addEventListener('keypress', (e) => { if (e.key === 'Enter') checkSecretCode(); });
            document.getElementById('openVerifyBtn').addEventListener('click', openVerifySection);
            
            document.getElementById('closeFormBtn').addEventListener('click', function() {
                document.getElementById('addFormContainer').classList.remove('active');
                document.getElementById('dataForm').reset();
                removeImages();
                removeVideo();
                document.getElementById('youtubeInputGroup').style.display = 'none';
                document.getElementById('imagesInputGroup').style.display = 'none';
                document.getElementById('videoInputGroup').style.display = 'none';
                document.getElementById('mediaType').selectedIndex = 0;
                document.getElementById('formResult').innerHTML = '';
                isVerified = false;
                hideDeleteButtons();
            });
            
            document.getElementById('cancelBtn').addEventListener('click', function() {
                document.getElementById('addFormContainer').classList.remove('active');
                document.getElementById('dataForm').reset();
                removeImages();
                removeVideo();
                document.getElementById('youtubeInputGroup').style.display = 'none';
                document.getElementById('imagesInputGroup').style.display = 'none';
                document.getElementById('videoInputGroup').style.display = 'none';
                document.getElementById('mediaType').selectedIndex = 0;
                document.getElementById('formResult').innerHTML = '';
                isVerified = false;
                hideDeleteButtons();
            });
            
            document.getElementById('dataForm').addEventListener('submit', handleFormSubmit);
            
            document.getElementById('imagesUploadBtn').addEventListener('click', () => document.getElementById('imageFiles').click());
            document.getElementById('videoUploadBtn').addEventListener('click', () => document.getElementById('videoFile').click());
            
            // Ø±Ø¨Ø· Ø²Ø± ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§
            document.getElementById('contactUsBtn').addEventListener('click', function(e) {
                e.preventDefault();
                showContactModal();
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('contactModal');
                if (e.target === modal) {
                    closeContactModal();
                }
            });
            
            initializeToken();
            
            setInterval(async () => { if (TOKEN) await fetchGitHubData(); }, 5 * 60 * 1000);
        });
    </script>
</body>
</html>